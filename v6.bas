#C64Studio.MetaData.BASIC:2049,BASIC V2
PRINTCHR$(147)
V=53248:X=24:Y=58
POKE53281,12:POKE53280,12


REM FORI=1TO80:
REM POKE199,POS({PI})*7/9AND1:
REM PRINTMID$("{GREY 3}{SHIFT-POUND}{GREY 1}{CBM-*}",RND(1)*4OR1,2);:
REM NEXT

POKE 1064,105
POKE 1065,223
POKE 1066,95
POKE 1067,233

REM SETUP SPRITE
POKE53269,1
POKE832,128:REM FORQ=832TO832+2:READW:POKEQ,W:NEXT
POKE2040,13
DATA128,0,0
POKE53287,2

LABEL120
J=PEEK(56320)
U=((JAND2)/4-(JAND1)/2)*2
C=(JAND8)/8-(JAND4)/4

REM SPRITE COORDS TO SCREEN COORDS
X1=INT((X-24)/8):Y1=INT((Y-50)/8)

REM SCREEN COORDS MODULOS
XM=X-INT(X/8)*8:YM=(Y-2-INT((Y-2)/8)*8)

Q=.5

D=2*((XM+YM)<7)+1:T=2*(XM<YM)+1:K=PEEK(1024+X1+Y1*40)

IF (K=105) OR (K=233) THEN X=X+D*Q:Y=Y+D*Q
IF (K=95) OR (K=223)  THEN X=X+T*Q:Y=Y-T*Q

X=X-C:Y=Y-U

POKE781,0:SYS59903
PRINT"{HOME}K:";K;" D:";D;" T:";T

REM MOVE SPRITE
POKEV,X:POKEV+1,Y

GOTOLABEL120
